#include "mundo.h"

#include <QCoreApplication>

Mundo::Mundo():nombres{"aad","aada","aapo","aaron","abby","abdul","abel","abigail","acácio","adelindo","ademir","adira","adolfo","adrian","adriana","adrião","afet","agnès","aguinaldo","agustin","aisha","aitor","alba","albert","alberte","alberto","alcibíades","alcinda","alcino","aldrovanda","alejandra","alejandro","aleksandra","aletéia","alex","alexander","alexandra","alexandre","alfonso","alfredo","alicia","aliciane","aline","alisa","alkan","allan","allen","allie","alma","almerindo","almurtão","aloís","altamira","alvaro","alvin","alyssa","amador","amalie","amanda","amber","amelia","amparo","amy","amélie","ana","andrea","andreas","andres","andresa","andy","angel","angela","angeles","angie","angèle","anna","annabelle","anne","anne-kathrin","anni","annie","anton","antonia","antonio","antónio","april","aquila","arnaud","arnold","arnoldo","arquimínio","arsénio","arthur","arturo","ary","astrid","asuncion","aubree","augusta","aurora","austin","auta","ava","avery","axel","axelle","azélio","baguandas","barac","barbara","beatrice","beatriz","becky","begoña","belen","bella","ben","benita","benito","benjamin","bently","bernard","bete","beth","betina","betino","bill","billy","birgitta","blake","blanca","blanche","boanerges","boaventura","bob","bobbie","bobby","bonnie","borja","brad","brandie","brandon","brandy","brayden","brennan","breno","brent","brian","bridget","britney","brittany","brooklyn","bruce","bryan","byron","caitlin","calvin","cameron","candice","cariana","carl","carla","carlos","carmelo","carmen","carol","carole","carolina","caroline","carolyn","carter","cassandra","cassiana","cassiano","catalina","caterina","catherine","cathy","cedrico","celia","celso","cesaltino","cesar","ceyhan","chad","charbel","charles","charlotte","cherly","chester","chloe","chris","christian","christine","christy","cidalino","claire","clara","clarice","clarindo","claude","claudia","claudirene","clayton","clifford","clifton","clinton","cloé","clídio","colleen","concepcion","concetta","connor","conny","constâncio","consuelo","corina","corinne","cory","cosme","craig","cristian","cristina","cristobal","célestin","célia","célian","dagmar","dan","dana","daniel","daniela","danny","darrell","darren","darryl","daryl","david","davut","dawn","dean","deann","deborah","debra","demelsa","denazaide","dener","denise","derek","derrick","deusdedito","diana","diane","dianne","diego","dilay","dilce","diocléia","dirk","djalme","dolores","domingo","donna","dora","dorian","dorle","douglas","duane","durbalino","dustin","dwayne","dwight","dylan","dária","déborah","earl","eberhardt","ed","eda","eddie","edelina","edelnide","edgar","edinéia","edna","eduardo","edwin","elaine","eleanor","elena","eleutério","eli","elias","elijah","elisa","elisabetta","elisete","eliza","elizabeth","ella","ellen","ellie","elliot","elma","elsie","elza","eládio","elóides","ema","emaús","emil","emilia","emilie","emilio","emily","emmelin","emmi","emílio","encarnacion","enilda","enrique","erasmo","eric","erika","erin","ernest","ernesto","esmirna","esperanza","esteban","estefânio","estelle","esther","estéfani","estélio","etelvira","ethan","eugene","eugenia","eugenio","eva","evan","evandro","evelyn","evelácio","evelásio","fabian","fabrícia","fatima","faustina","feliciano","felipe","felix","fernando","ferrer","fijgje","filinto","filipo","filomena","flenn","fletcher","florence","florinda","fradique","frances","francisca","francisco","franklin","fred","frederick","freya","frida","gabe","gabin","gabriel","gabriela","gabriella","galiano","gamaliel","gavin","gema","geneci","genesis","george","gerald","geraldine","gerardo","gerberto","german","gert","gertrudes","ghizlane","giani","gilbert","gilda","girão","gisele","glen","gloria","gláucia","gonzalo","gonçala","gordon","grace","graciela","greg","gregorio","gregory","guilherme","guilhermina","guillermo","guimar","gustavo","gwendolyn","gül","hala","hanna","harold","harvey","hazel","heather","hector","hedda","heidi","heiko","heinz","helena","helier","hemelyn","henry","herbert","hilde","hildegard","hildegart","holly","honório","howard","hugh","hugo","hunter","hélmut","hérman","iag","ibérico","ida","idálio","ignacio","iker","ilda","ilona","ilza","imre","ines","ingrid","inmaculada","iracema","irene","irina","irídea","isaac","isabel","isabelle","isaiah","isla","ismael","isolino","ivan","ivanete","ivonete","izabella","jaci","jacinto","jacira","jack","jacob","jaime","jake","jakob","jamie","jamila","jane","janet","jaqueline","jar","jared","jason","javier","jay","jayden","jean","jean-luc","jeanne","jeffery","jeffrey","jenny","jerome","jesse","jessica","jessie","jesus","jezabel","jill","jim","jimmy","jo","joan","joann","joaquin","job","jocelaine","joel","john","jon","jonas","jonathan","jonatã","joona","jordi","jorge","joris","josane","jose","josefa","josefina","josep","josilene","josselino","jovina","joy","juan","juana","judd","judy","juho","julcenira","julia","julian","juliano","julie","julio","julius","juni","juninho","juno","justin","júlia","júnior","kailash","kaitlin","karen","karl","karolina","kasper","kathryn","kathy","katie","kaya","kayla","keith","kelen","kenneth","kenney","kim","kimberly","kirk","klaus-d.","kristen","kristina","kurt","kyle","kübra","laica","laila","lana","lance","landon","laura","lauren","lauriete","laurindo","lauro","lawrence","leah","lena","lenira","lenni","lenícia","leo","leon","leonard","leonor","lesa","leslie","lester","leta","levi","lia","liberal","licínio","lidia","lila","liliam","liliano","lillian","lily","linda","lindsay","lino","lisa","lois","lolita","lonnie","lorena","lorenzo","lotta","louanne","louis","louise","lourdes","lucas","lucas or luke","lucia","luciane","luciara","lucille","lucrécia","lucy","ludwig","luis","luisa","luke","luukas","luz","lyam","lázaro","léonie","línton","mabel","macit","maddison","madison","magdalena","magnólia","manuel","manuela","mar","marc","marco","marcos","marcus","margarido","margarita","margaux","margie","mari","maria","mariane","mariano","marice","maricelda","maridelza","marie","mariette","marilise","marilyn","marin","marina","marinalva","mario","marionice","marissol","maritza","marjorie","mark","marli","marluce","marshall","marta","martin","martinho","matt","matthew","mattie","maurice","max","maxime","maxwell","maëline","melike","melinda","melissa","melvin","meral","mercedes","mia","michael","michele","michelle","miguel","miguela","mike","milagros","mildred","milja","milla","mirco","mireille","miriam","miro","misty","mohamed","molly","monica","montserrat","morris","muhammed","mya","myrtle","márcia","márvio","naiara","nanna","naomi","nara","narsélio","natalia","nathaniel","natércio","naïma","neil","nelia","nella","nelson","nerea","nete","nicholas","nick","nicodemos","nicolas","nicolau","nicoline","nicásio","nieves","nihal","ninja","noe","noelia","noelle","nooa","norberta","norma","norman","nuria","nêuton","odélia","olga","olindo","olivar","olive","olivia","orósio","oscar","osnilda","otniel","otto","owen","pablo","paige","paloma","pamela","patricia","patrick","paul","paula","pauline","paulino","pedro","perry","peter","phil","philippe","phillip","phoebe","pihla","pilar","pinja","plínio","pompeu","potira","prisca","procópio","purificacion","quaresma","rachel","rafael","rafaele","raffaele","raisa","ralph","ramon","randy","raquel","raul","ray","raymond","rebecca","reginald","remedios","remígio","rene","renee","reno","ricardo","rich","riley","rita","ritthy","riu","robert","roberta","roberto","robin","rocio","rodrigo","roger","roland","romain","romana","romarilda","romão","ronald","rosa","rosalyn","rosario","rose","rosemerie","rosimara","ross","rotraud","roy","ruben","ruby","russell","rúpio","saionara","sally","salustiano","salustiniano","salvador","samanta","same","samuel","sandor","sandra","sanne","santiago","sara","sarah","savannah","scott","sean","sebastian","selma","serenity","sergio","shane","sharlene","shawn","sherry","shirlei","si","siddártha","silene","siloé","silvano","silvia","silviana","silviara","simauro","simon","sinara","sixto","sofia","soham","solano","soledad","sonia","soraia","stella","stephanie","stephen","sulene","sumeyra","susan","susana","susanna","susie","suzanna","suzanne","suzy","sérgio","sílvia","tabita","tammy","taylor","ted","teka","telma","teodomiro","teresa","terrance","terrence","terri","terry","theo","theodore","theresa","ticiana","ticira","tierri","tim","timmothy","timothy","titouan","todd","tom","tomas","tomothy","tonje","tony","tracey","tracy","travis","trinidad","tristan","troy","tude","tálio","túlia","ubiara","ubirani","universina","valdemar","valdemira","valentin","valério","vando","vanesa","vanessa","vasco","vergílio","vernon","veronica","vicenta","vicente","vicentina","vicki","vickie","victor","victoria","vidaúl","viggo","viktor","vincent","vincenzo","virginia","virgulino","vivan","viveque","viviane","vânio","vílmar","waldinélia","walfried","wallace","walter","wanderleya","warren","weronika","william","willie","wyatt","xander","xavier","xenócrates","xênia","yasemin","yolanda","yvonne","zachary","zarco ","zardilaque","zeli","zenóbia","zoe","zoey","ápio","ângelo","élio","érico"},
	apellidos{"abraha", "abraham", "adam", "adams", "addy", "adolf", "aguilar", "aigner", "akal", "akan", "akman", "albrecht", "alexander", "allen", "almeida", "alonso", "alvarez", "alves", "amann", "ambrose", "amend", "ammann", "andersen", "anderson", "andrews", "antonsen", "appelt", "aragão", "araújo", "arias", "armstrong", "arnaud", "arnold", "aubert", "austin", "aybar", "aydan", "aßmann", "bachmann", "backhaus", "bailey", "baker", "banks", "barbosa", "barnaby", "barnes", "barnett", "barrett", "barros", "barth", "barz", "bates", "baumer", "baumgarten", "beck", "beenen", "beer", "bell", "benitez", "bennett", "berg", "bergeron", "bernard", "berner", "berry", "bertsch", "beutel", "bichler", "bickel", "bieber", "bishop", "bisseling", "biçer", "black", "blanc", "blanco", "bochmann", "boden", "bohne", "boller", "bolz", "bongartz", "bonnet", "borowski", "bouchard", "boudewijn", "bouwers", "bowman", "boyd", "boyer", "brabander", "brack", "bradley", "brady", "brar", "bravo", "brecht", "breunig", "brewer", "brockmann", "brooks", "brown", "brun", "brust", "bryant", "bräutigam", "buchmann", "buhr", "burghardt", "burke", "burns", "burton", "buse", "buskens", "butler", "bußmann", "byrd", "bächle", "bäuerle", "bélanger", "böhner", "böse", "caballero", "cabrera", "caldeira", "caldwell", "calvo", "campbell", "campos", "candan", "cano", "cardoso", "carlson", "carmona", "caron", "carpenter", "carpentier", "carr", "carrasco", "carroll", "carter", "carvalho", "castillo", "castro", "cavalcanti", "chambers", "chan", "chapman", "charles", "chavez", "chen", "chevalier", "chow", "christensen", "christiansen", "christophersen", "chu", "claire", "clark", "clarke", "clauß", "clement", "cole", "coleman", "colin", "collins", "cook", "cooper", "cortes", "costa", "couri", "cox", "craig", "crawford", "crespo", "creusen", "cruz", "cunningham", "curtis", "côté", "da conceição", "da costa", "da cruz", "da cunha", "da luz", "da mata", "da mota", "da paz", "da rocha", "da rosa", "daniels", "das neves", "david", "davidson", "davies", "davis", "day", "de blaauw", "de souza", "de vriend", "de vries", "dean", "delgado", "denis", "denys", "dias", "diaz", "diehl", "diel", "dielissen", "diez", "dixon", "dominguez", "dorsch", "douglas", "drechsler", "dreher", "dreßler", "duarte", "dubois", "dudek", "dufour", "duncan", "dunn", "dunne", "duran", "duval", "duwe", "duygulu", "eckel", "edwards", "eichinger", "eilers", "elde", "elliott", "ellis", "elvik", "emmerich", "emmert", "endres", "engelhard", "englert", "ennis", "esteban", "evans", "ewert", "fabre", "farias", "farragher", "faure", "feldmeier", "fels", "ferguson", "fernandes", "fernandez", "ferreira", "ferrer", "fetzer", "fields", "finger", "fisher", "fitzgerald", "fitzpatrick", "fitzsimmons", "fleckenstein", "fleischmann", "fleming", "fletcher", "flores", "flø", "fogaça", "fontai", "ford", "fortin", "foster", "fournier", "fowler", "fox", "framnes", "francois", "frank", "franklin", "franzen", "frazier", "freeman", "freitas", "french", "frenz", "frey", "friedl", "früh", "fuentes", "fuller", "führer", "gagnon", "gagné", "gaillard", "gallardo", "gallego", "garcia", "gardner", "garrett", "garrido", "garza", "gauthier", "geier", "genz", "george", "gerstner", "gibson", "gil", "gilbert", "gill", "gimenez", "ginnish", "glaß", "gleich", "glock", "glöckner", "gohlke", "goldmann", "gomes", "gomez", "gonzales", "gonzalez", "gonçalves", "gordon", "gottfried", "graham", "gramlich", "grant", "graves", "gray", "green", "gregory", "greif", "grewal", "grieger", "griffin", "grube", "gruber", "gräber", "grün", "guerrero", "gundlach", "guse", "gutierrez", "gölz", "görner", "görtz", "hackmann", "hagen", "haider", "hale", "halko", "hall", "hallmann", "hamalainen", "hamilton", "hammann", "hanisch", "hansen", "hanson", "harcourt", "harnisch", "harper", "harris", "harrison", "hart", "harvey", "haubold", "hawkins", "hayes", "hegdal", "heggem", "heiden", "heidrich", "heim", "hein", "helbig", "heldt", "helland", "hellmann", "hellmuth", "henderson", "henry", "herb", "herber", "herbert", "hernandez", "herrera", "herrero", "heyne", "heß", "hicks", "hidalgo", "hieber", "hill", "hintz", "hoch", "hofer", "hoffman", "hoffmann", "holland", "holmes", "holt", "holtslag", "hopkins", "horst", "horton", "howard", "howell", "hubert", "huck", "hudson", "hughes", "hunt", "hunter", "häring", "häusler", "häußler", "höger", "höll", "höpfner", "ibañez", "iglesias", "jackson", "jacobs", "james", "janke", "janson", "janzen", "jarvela", "jean-baptiste", "jenkins", "jennings", "jensen", "jesse", "jesus", "jimenez", "jobst", "johnson", "johnston", "joki", "joly", "jones", "jordan", "jörg", "jørgensen", "jünger", "kari", "karle", "katz", "kegel", "kelley", "kelly", "kemmer", "kempe", "kemper", "kempf", "kennedy", "kim", "kind", "kindler", "king", "klasen", "klatt", "kleven", "kley", "klingenberg", "kliphuis", "klose", "kluge", "kluth", "knight", "knopper", "kober", "koenen", "kolbeck", "kolodziej", "koop", "kortmann", "kowalski", "koç", "krampe", "krapp", "kratz", "krey", "krieg", "kriegel", "krieger", "kristensen", "kromer", "krull", "kröger", "kugler", "kuhl", "kuhn", "kumar", "kumpula", "kunkel", "kunt", "kuntze", "kupka", "kurth", "köpke", "küster", "ladwig", "lam", "lambert", "lane", "langvik", "larson", "lauer", "laufer", "laurent", "lavigne", "lavoie", "lawrence", "lawson", "leclercq", "lecomte", "lee", "legrand", "lehmkuhl", "lehnen", "lehnert", "lembke", "lemmer", "leon", "leonhardt", "lepisto", "lewis", "li", "lieb", "lima", "limmer", "little", "liu", "lo", "lohmann", "long", "lopes", "lopez", "lord", "lorenzen", "lorenzo", "lowe", "lozano", "lucas", "lynch", "lévesque", "löhr", "ma", "macdonald", "mack", "mackay", "macrae", "maier", "mair", "makinen", "mandel", "mang", "marchand", "margaret", "marin", "marquez", "marschall", "marshall", "martin", "martinez", "martins", "mason", "masson", "matheis", "matt", "matthews", "matthies", "may", "mayerhofer", "mayr", "mccoy", "mcdonalid", "mcguinness", "mckinney", "medina", "meehan", "mehmood", "meinecke", "melo", "mendes", "mendez", "mendoza", "merten", "metz", "meuser", "meyer", "michalski", "mildner", "miles", "miller", "mills", "mitchell", "mitchelle", "molina", "monteiro", "montero", "montgomery", "moore", "mora", "moraes", "morales", "moreau", "moreira", "moreno", "morgan", "morgenstern", "morin", "morris", "morrison", "moura", "moya", "muller", "murphy", "murray", "mustafa", "muñoz", "myers", "märz", "mælen", "møller", "nascimento", "navarro", "neal", "neef", "nehls", "nelson", "nestler", "neu", "nevala", "newman", "nguyen", "nichols", "nielsen", "niemi", "nieto", "nitzsche", "nogueira", "novaes", "novak", "nunes", "nuñez", "nägele", "obrien", "odonoghue", "oja", "oliveira", "oliver", "olivier", "ollila", "olson", "omahony", "oostvogels", "oppermann", "ortega", "ortiz", "ostermeier", "osullivan", "otoole", "ouellet", "owens", "oßwald", "pahl", "palmer", "park", "parker", "parra", "pascual", "pastor", "patel", "patterson", "pauli", "pausch", "payne", "pearson", "peck", "peixoto", "pelletier", "pena", "pereira", "perez", "perkins", "perrin", "perry", "peschel", "peters", "peterson", "petit", "peña", "philippe", "phillips", "pichler", "pierce", "pietila", "pinto", "pires", "plum", "porter", "porto", "poser", "poulsen", "powell", "pranger", "prescott", "price", "prieto", "prins", "pruim", "pulli", "rademacher", "ramirez", "ramos", "rantanen", "rasch", "rashid", "rasmussen", "rath", "rautenberg", "ray", "reed", "reese", "rehbein", "reichardt", "reichl", "reichmann", "reid", "reinartz", "reiter", "reiß", "reuter", "rey", "reyes", "reynolds", "rezende", "rhein", "rhodes", "ribeiro", "rice", "richards", "richardson", "rick", "rieke", "riley", "rinne", "rivera", "riviere", "robert", "roberts", "robertson", "robinson", "rocha", "rodrigues", "rodriguez", "rodriquez", "rogers", "rognes", "rohr", "rohrbach", "rojas", "roll", "roller", "roman", "romero", "roos", "roscher", "rose", "rosner", "ross", "rottmann", "rousseau", "roussel", "roy", "roß", "rubio", "rud", "ruff", "ruiz", "rump", "ruppel", "rusch", "russell", "ryan", "rösler", "rühle", "rütten", "saarinen", "sacher", "sadowski", "saez", "saksa", "sales", "salo", "salonen", "sanchez", "sanders", "santana", "santiago", "santos", "sanz", "sauter", "schaaf", "schacht", "schauer", "schenk", "schenke", "scherer", "scherf", "schier", "schiffmann", "schimpf", "schmidt", "scholten", "schröder", "schuck", "schultes", "schultheiß", "schuurman", "schwab", "schäffler", "schöll", "schöner", "schönherr", "schütz", "scott", "sedlmeier", "seifert", "selle", "senger", "serrano", "seubert", "sezek", "shaw", "shelton", "siemers", "silva", "silveira", "simmmons", "simmons", "simonis", "simpson", "sims", "singh", "sirko", "slawa", "smith", "smythe", "snyder", "soler", "sommerfeld", "soto", "souza", "spencer", "spies", "spooren", "stadler", "stanley", "steeves ", "steininger", "stenzel", "stephens", "stevens", "steward", "stewart", "stockmann", "stone", "storck", "storz", "strampel", "straßer", "streich", "strunk", "stutz", "stüber", "suarez", "sullivan", "sutton", "söllner", "sørensen", "taylor", "teixeira", "ten tije", "terry", "tesch", "thiede", "thiem", "thoma", "thomas", "thompson", "thomsen", "thon", "tittel", "tolksdorf", "torres", "trapp", "traub", "trautmann", "tremblay", "tucker", "tuomala", "tuomi", "turner", "van de meeberg", "van den hoed", "van der helm", "van dorland", "van grondelle", "van hattem", "van koert", "van riemsdijk", "van stekelenburg", "vargas", "varhaug", "vasquez", "vazquez", "vega", "velasco", "viana", "vicente", "vidal", "vieira", "volk", "vroemen", "waara", "wade", "wagner", "waibel", "wald", "walker", "wallace", "wallner", "walters", "wang", "ward", "warnecke", "warren", "washington", "watkins", "watson", "watts", "weaver", "webb", "weber", "wegener", "wehner", "weide", "weidemann", "weidlich", "weinrich", "weishaupt", "weißenborn", "welch", "wells", "wenger", "werle", "wessels", "west", "wheeler", "white", "wiebe", "wieland", "wiesmann", "wilczek", "williams", "williamson", "willis", "wilson", "winkel", "wittek", "witzel", "wolfrum", "wong", "wood", "woods", "wrede", "wright", "wunderlich", "wuollet", "wuori", "xu", "young", "zech", "zell", "zhang", "zieger", "zobel", "çetiner", "çörekçi", "önür", "örge", "özdenak"},
	tiposPecados{"Luguria","Gula","Avaricia","Pereza","Ira","Envidia","Soberbia"},
	tiposVirtudes{"Castidad","Ayuno","Donación","Diligencia","Calma","Solidaridad","Humildad"}
{
	cargarDatos();
}

void Mundo::cargarDatos(){
	QFile f("://datos.db");
	if (f.open(QFile::ReadOnly)){
		QTextStream ts(&f);
		QStringList l;
		ts.readLine();
		ts.readLine();
		for (int i=0;i<100;i++){
			l=ts.readLine().split("\t");
			paises[i]=l[0].toStdString();
			paisesPorContinente[l[2].toStdString()].append(paises[i]);
		}
	}
}

void Mundo::insertarNuevaPersona(){
	int id=getRandomInt(0,1000000);
	while(arbol.existe(id))
		id=getRandomInt(0,1000000);
	Persona*nuevaPersona=new Persona(nombres[getRandomInt(0,1000)],apellidos[getRandomInt(0,1000)]
			,paises[getRandomInt(0,100)],creencias[getRandomInt(0,10)],profesiones[getRandomInt(0,50)]
			,"xllestebanllx@gmail.com",id);
	familiasPorPais[QString::fromStdString(nuevaPersona->pais)]
			[QString::fromStdString(nuevaPersona->apellido)].insert(nuevaPersona);
	lista.insertar(nuevaPersona,arbol.getParaInsertar(nuevaPersona->id));
	if (arbol.cantNodos<lista.size()*0.01)
		arbol.completarArbol(&lista);
	char cantHijos=static_cast<char>(getRandomInt(0,9));
	for(Persona*p:personasSinPapa){
		if (cantHijos==0) break;
		if (p->pais==nuevaPersona->pais){
			nuevaPersona->hijos.append(p);
			personasSinPapa.removeOne(p);
			cantHijos--;
		}
	}
	personasSinPapa.append(nuevaPersona);
}

void Mundo::insertarPersonas(int c){
	for(int i=0;i<c;i++)
		insertarNuevaPersona();
}

Persona*Mundo::eliminar(Persona*p){
	NodoArbol*temp=arbol.raiz;
	while((*temp).hijoDerecho!=nullptr)
		temp=(p->id<(*temp).valor?(*temp).hijoIzquierdo:(*temp).hijoDerecho);
	NodoLista*temp2=(*temp).nodoLista;
	while (temp2->persona->id<p->id)
		temp2=temp2->siguiente;
	if (temp2->persona->id==p->id)
		lista.eliminar(temp2);
	if ((*temp).valor==p->id)
		arbol.corrimientoALaIzquierda(temp);
	if (arbol.cantNodos/2>=lista.size()*0.01)
		arbol.completarArbol(&lista);
	return temp2->persona;
}

void Mundo::pecar(){
	for (NodoLista*temp=lista.primero();temp!=nullptr;temp=temp->siguiente)
		temp->persona->pecar();
}

QMap<QString, int*> Mundo::cantAccionesPorFamilia(bool pecados, QString pais){
	QMap<QString,int*>accionesPorFamilia;
	for(auto j:familiasPorPais.value(pais).keys())
		sumaDeArrays(accionesPorFamilia[j],(pecados?
																					familiasPorPais.value(pais).value(j).sumaPecados():
																					familiasPorPais.value(pais).value(j).sumaVirtudes())
								 );
	return accionesPorFamilia;
}

QMap<QString, int*> Mundo::cantAccionesPorPais(bool pecados){
	QMap<QString,int*>accionesPorPais;
	for(auto i:familiasPorPais.keys())
		for (auto j:cantAccionesPorFamilia(pecados,i))
			sumaDeArrays(accionesPorPais[i],j);
	return accionesPorPais;
}

QVector<QPair<int*, QString> > Mundo::ordenar(QMap<QString, int*> cantidadAccionesPorPais, bool ascendente){
	QVector<QPair<int*,QString>> mapVector;
	for (auto i :cantidadAccionesPorPais.keys())
		mapVector.append(QPair<int*,QString>(cantidadAccionesPorPais[i],i));
	sort(mapVector.begin(),mapVector.end(),comparador(ascendente));
	return mapVector;
}

void Mundo::reporte(bool ascendente, bool pecadores, int cant){
	QVector<QPair<int*,QString>> resultado=ordenar(cantAccionesPorPais(pecadores),ascendente);
	imprimirResultado(resultado,cant);
}

void Mundo::imprimirResultado(QVector<QPair<int*, QString> > resultado, int cant){
	QString salida="";
	for (int i = 0; i < cant&&i<resultado.size(); ++i)
		salida+=QString::number(i+1)+") "+resultado[i].second+" con "+QString::number(resultado[i].first[7])+"\n";
	cout<<salida.toStdString();
}

void Mundo::reportePaisesMasPecadores(){
	reporte(false,true,10);
}

void Mundo::reportePaisesMenosPecadores(){
	reporte(true,true,5);
}

string Mundo::reporteAccionesDeCiertaFamilia(string pais, string apellido, bool pecados){//La especificación de familia;
	string salida="Pecados de la familia "+pais+"-"+apellido+"\n";
	unsigned int initialLenght=salida.length();
	QQueue<nodoPersona*>restantes;
	nodoPersona*persona=familiasPorPais[QString::fromStdString(pais)][QString::fromStdString(apellido)].r;
	while(persona!=nullptr||restantes.isEmpty()){
		if(persona!=nullptr){
			restantes.enqueue(persona->l);
			restantes.enqueue(persona->r);
			salida+="Pecados de "+persona->d->nombre+" "+persona->d->apellido+"\n";
			for(int i=0;i<8;i++)
				salida+=pecados?tiposPecados[i]:tiposVirtudes[i]+": "+to_string(pecados?persona->d->pecados[i]:persona->d->virtudes[i])+"\n";
		}
		persona=restantes.dequeue();
	}
	if (salida.length()>initialLenght)
		return salida;
	else return "";
}

void Mundo::reportePecadosPorFamilia(){
	for (string p: paises)
		for (string a: apellidos)
			cout<<reporteAccionesDeCiertaFamilia(p,a,true);
}

void Mundo::obrarBien(){
	for (NodoLista*temp=lista.primero();temp!=nullptr;temp=temp->siguiente)
		temp->persona->obrarBien();
}

void Mundo::reportePaisesMasBuenaGente(){
	reporte(false,false,10);
}

void Mundo::reportePaisesMenosBuenaGente(){
	reporte(true,false,5);
}

void Mundo::reporteVirtudesPorFamilia(){
	for (string p: paises)
		for (string a: apellidos)
			cout<<reporteAccionesDeCiertaFamilia(p,a,false);
}

comparador::comparador(bool a):ascendente(a){}

bool comparador::operator()(const QPair<int*, QString>&a, const QPair<int*, QString>&b) const {
	return ascendente==(a.first[8] < b.first[8]);
}
